DATABASE_HOST: db
DATABASE_PORT: 5432
DATABASE_USER: postgres
DATABASE_USER_PASSWD: mypasswd
DATABASE_DBNAME: fosm
DATABASE_CLEANUP_HOUR: 24
DATABASE_ENTRY_EXPIRE_MONTH: 2

logchannel: -1001206244890
daystoban: 365

immunity:
  - owner
  - superadmin
  - fedadmin

LEVELS:
  - owner
  - superadmin
  - fedadmin
  - user
  - banned

LEVEL_OWNER:
  - promote
  - demote
  - newowner
  - removedata

LEVEL_SUPERADMIN:
  - addgroup
  - removegroup
  - changelevel

LEVEL_FEDADMIN:
  - demoteme
  - fban
  - funban
  - fbanlist
  - userstat
  - changecomment
  - viewgroups
  - search

LEVEL_USER:
  - fedadmins
  - superadmins
  - owners

LEVEL_BANNED:
  - mylevel
  - mystat
  - groupid
  - myid
  - mydata
  - help
  - start
  - viewbanreason
  - privacypolicy
  - testme

adduser: insert into users values (%s,%s,%s,'user','',NULL,%s, '{}');
getuser: select * from users where id=%s;
getuserbyusername: select * from users where username=%s LIMIT 1;
getusersbylevel: select * from users where level=%s;
getusersbydisplayname: select * from users where displayname like %s;
removeuser: delete from users where id=%s;
removegroupfromuser: update users set groups=groups - %s where id=%s;
addgrouptouser: update users set groups=groups || %s where id=%s;
changelevel: update users set level=%s where id=%s;
authorizegroup: insert into groups values (%s, %s);
deauthorizegroup: delete from groups where id=%s;
getgroups: select * from groups;
getgroup: select * from groups where id=%s;
banuser: update users set level='banned' where id=%s;
unbanuser: update users set level='user' where id=%s;
updatecomment: update users set comment=%s where id=%s;
updatedisplayname: update users set displayname=%s where id=%s;
updateissuedbyid: update users set issuedbyid=%s where id=%s;
updatetimestamp: update users set timestamp=%s where id=%s;
dbcleanupbyts: select id, ts from users where level=%s;

table_users:
  - id int
  - username text
  - displayname text
  - level text
  - comment text
  - issuedbyid int
  - ts timestamp
  - groups jsonb

table_groups:
  - id bigint
  - username text
